<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1,
      shrink-to-fit=no">
  <title>TrendStream</title>
  <!-- plugins:css -->
  <link rel="stylesheet" href="../../css/style1.css">
  <!-- plugins:css -->
  <link rel="stylesheet" href="../../vendors/feather/feather.css">
  <link rel="stylesheet" href="../../vendors/mdi/css/materialdesignicons.min.css">
  <link rel="stylesheet" href="../../vendors/ti-icons/css/themify-icons.css">
  <link rel="stylesheet" href="../../vendors/typicons/typicons.css">
  <link rel="stylesheet" href="../../vendors/simple-line-icons/css/simple-line-icons.css">
  <link rel="stylesheet" href="../../vendors/css/vendor.bundle.base.css">
  <link rel="stylesheet" href="../../vendors/jquery-bar-rating/css-stars.css">


  <!-- endinject -->
  <!-- Plugin css for this page -->
  <!-- End plugin css for this page -->
  <!-- <link rel="stylesheet" href="../../vendors/flag-icon-css/css/flag-icon.min.css" /> -->
  <link rel="stylesheet" href="../../vendors/font-awesome/css/font-awesome.min.css" />
  <link rel="stylesheet" href="../../vendors/jquery-contextmenu/jquery.contextMenu.min.css">
  <link rel="stylesheet" href="../../vendors/jquery-toast-plugin/jquery.toast.min.css">

  <!-- inject:css -->
  <link rel="stylesheet" href="../../css/vertical-layout-light/style.css">

  <link rel="shortcut icon" href="../../images/favicon.png" />
  <style>
    .Error {
      border: 1px solid red;
    }
  </style>
</head>

<body>
  <div class="align-content-center justify-content-center">
    <div class="col-md-4 col-sm-6 grid-margin stretch-card m-auto pt-5" id="loader">
      <div class="dot-opacity-loader">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>
  <div class="body-content" style="display: none;">
    <!-- partial:partials/_navbar.html -->
    <nav class="navbar default-layout col-lg-12 col-12 p-0 fixed-top d-flex align-items-top flex-row" id="navbar">
    </nav>
    <!-- partial -->
    <div class="container-fluid page-body-wrapper">
      <!-- partial:partials/_settings-panel.html -->
      <div class="theme-setting-wrapper">
        <div id="settings-trigger"><i class="ti-settings"></i></div>
        <div id="theme-settings" class="settings-panel">
          <i class="settings-close ti-close"></i>
          <p class="settings-heading">SIDEBAR SKINS</p>
          <div class="sidebar-bg-options selected" id="sidebar-light-theme">
            <div class="img-ss rounded-circle bg-light border me-3"></div>Light
          </div>
          <div class="sidebar-bg-options" id="sidebar-dark-theme">
            <div class="img-ss rounded-circle bg-dark border me-3"></div>Dark
          </div>
          <p class="settings-heading mt-2">HEADER SKINS</p>
          <div class="color-tiles mx-0 px-4">
            <div class="tiles success"></div>
            <div class="tiles warning"></div>
            <div class="tiles danger"></div>
            <div class="tiles info"></div>
            <div class="tiles dark"></div>
            <div class="tiles default"></div>
          </div>
          <p class="settings-heading mt-2 divnotification">Notification</p>
          <div class="mx-0 px-4 divnotification">
            <div class="form-check form-check-success">
              <div class="d-flex">
                <label class="form-check-label">
                  <input type="checkbox" class="form-check-input" id="notificationstatus">
                </label>
                <span id="notificationstatustext">Off</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- partial -->
      <!-- partial:partials/_sidebar.html -->
      <nav class="sidebar sidebar-offcanvas" id="sidebar">
      </nav>
      <div class="main-panel">
        <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true" id="modal">
          <div class="modal-dialog" role="document">
            <div class="modal-content" id="modal-content">
            </div>
          </div>
        </div>
        <div class="content-wrapper">
          <div class="home-tab pt-3" id="alltab">
            <div class="d-sm-flex align-items-center justify-content-between border-bottom">
              <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item">
                  <a class="nav-link ps-0 active" id="home-tab" data-bs-toggle="tab" href="#Blogs" role="tab"
                    aria-controls="Blogs" aria-selected="true">All</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="category-tab" data-bs-toggle="tab" href="#category" role="tab"
                    aria-selected="false">Category</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="language-tab" data-bs-toggle="tab" href="#language" role="tab"
                    aria-selected="false">language</a>
                </li>
              </ul>
              <div>
                <div class="btn-wrapper">
                  <div class="dropdown language-dropdown" style="display: none;">
                    <button class="btn btn-outline-info btn-sm dropdown-toggle" type="button" id="language-combobox"
                      data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Select Language
                    </button>
                    <div class="dropdown-menu" aria-labelledby="language-combobox"
                      style="max-height: 400px; overflow: hidden; overflow-y: auto;">
                      <h6 class="dropdown-header">Select Language</h6>
                      <a class="dropdown-item select-language" data-value="1">Language1</a>
                    </div>
                  </div>
                  <div class="dropdown category-dropdown" style="display: none;">
                    <button class="btn btn-outline-info btn-sm dropdown-toggle" type="button" id="category-combobox"
                      data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Select Category
                    </button>
                    <div class="dropdown-menu" aria-labelledby="category-combobox"
                      style="max-height: 400px; overflow: hidden; overflow-y: auto;">
                      <h6 class="dropdown-header">Select Category</h6>
                      <a class="dropdown-item select-category" data-value="1">category1</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-content tab-content-basic">
              <div class="tab-pane fade active show" id="Blogs" role="tabpanel" aria-labelledby="home-tab">
                <h4 class="m-0 text-muted">All blogs</h4>
                <div class="cards grid-row" id="content-cardc">
                </div>
              </div>
              <div class="tab-pane fade" id="category" role="tabpanel" aria-labelledby="read-list">
                <h4 class="m-0 text-muted">selected Category</h4>
                <div class="cards grid-row" id="content-cardc">
                </div>
              </div>
              <div class="tab-pane fade" id="language" role="tabpanel" aria-labelledby="language-tab">
                <h4 class="m-0 text-muted">selected language</h4>
                <div class="cards grid-row" id="content-cardc">
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
      <!-- <div class="containerc"></div> -->
      <!-- main-panel ends -->
    </div>
    <!-- <h1>aa</h1>
    <img src="../../images/uploadimage/Screenshot (2).png"> -->
    <!-- page-body-wrapper ends -->
  </div>
  <!-- container-scroller -->
  <script src="../create/main.js"></script>
  <script src="../../js/sidebar.js"></script>
  <script src="../../js/navbar.js"></script>
  <script>
    //             var targetDiv = document.getElementById('content-cardc');
    // var content = '<div class="card"><div align=center>                <i class="mdi mdi-dots-horizontal"></i>              </div>              <div class="card-top">                <img src="download.jpg" alt="Blog Name">              </div>              <div class="card-bottom flex-row">                <span class="cspaan date">Monday, Jan 20, 2021</span>                <p class="cp"><img class="profile-pic" src="images/faces/face1.jpg"> Blogger name</p>              </div>              <div class="card-info">                <h2 class="btitle">JavaScript Quote Generator</h2>              </div>              <div class="card-bottom flex-row">                <button type="button" class="btn btn-outline-primary btn-sm">blog c.</button>                <p class="nav">                  <i class="lcv mdi mdi-heart"></i>&nbsp;12                  <i class="lcv mdi mdi-comment"></i>&nbsp;20                  <i class="lcv mdi mdi-eye"></i>&nbsp;200                </p>              </div>            </div>';
    // targetDiv.appendChild(content);
    //             var targetDiv = document.getElementById('content-cardc');
    //             // for(var i = 0 ; i<10 ;i++){
    // targetDiv.innerHTML('');
    // }
    $(document).ready(function () {
      setlogindata();
      navbar();
      // showSwal('auto-close', "Not suport in your account", "Please convert bloger account.");
      sidebar();
      checknotification();
      $.ajax({
        url: "../../api/trending.php",
        type: "POST",
        data: JSON.stringify({ key: 'trending' }),
        dataType: "JSON",
        success: (data) => {
          console.log(data);
          if (data.status) {
            content = `            
                      <div class="d-sm-flex align-items-center justify-content-between border-bottom">
                        <ul class="nav nav-tabs" role="tablist">
                          <li class="nav-item">
                            <a class="nav-link ps-0 active" id="home-tab" data-bs-toggle="tab" href="#Blogs" role="tab"
                              aria-controls="Blogs" aria-selected="true">All</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" id="category-tab" data-bs-toggle="tab" href="#category" role="tab"
                              aria-selected="false">Category</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" id="language-tab" data-bs-toggle="tab" href="#language" role="tab"
                              aria-selected="false">Language</a>
                          </li>
                        </ul>
                        <div>
                          <div class="btn-wrapper">
                            <div class="dropdown language-dropdown" style="display: none;">
                              <button class="btn btn-outline-info btn-sm dropdown-toggle" type="button" id="language-combobox"
                                data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Select Language
                              </button>
                              <div class="dropdown-menu" aria-labelledby="language-combobox"
                                style="max-height: 400px; overflow: hidden; overflow-y: auto;">
                                <h6 class="dropdown-header">Select Language</h6>`
            for (i = 0; i < data.languages.length; i++) {
              content += ` 
                                  <a class="dropdown-item select-language" data-value="`+ data.languages[i].lcode + `">` + data.languages[i].lname + `</a>`
            }
            content += `
 
                              </div>
                            </div>
                            <div class="dropdown category-dropdown" style="display: none;">
                              <button class="btn btn-outline-info btn-sm dropdown-toggle" type="button" id="category-combobox"
                                data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Select Category
                              </button>
                              <div class="dropdown-menu" aria-labelledby="category-combobox"
                                style="max-height: 400px; overflow: hidden; overflow-y: auto;">
                                <h6 class="dropdown-header">Select Category</h6>`
            for (i = 0; i < data.categorys.length; i++) {
              content += ` 
                                   <a class="dropdown-item select-category" data-value="`+ data.categorys[i].bcid + `">` + data.categorys[i].bcname + `</a>`
            }
            content += `
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="tab-content tab-content-basic">
                        <div class="tab-pane fade active show" id="Blogs" role="tabpanel" aria-labelledby="home-tab">
                          <h4 class="m-0 text-muted">All blogs</h4>
                          <div class="cards grid-row" id="content-cardc">`
            for (var i = 0; i < data.blogs.length; i++) {
              if (data.blogs[i].blog_status == "posted" && data.blogs[i].user_type == "blogger") {
                const postdate = data.blogs[i].blog_post_time.split(" ")[0].split("-");
                const sdate = new Date(postdate[0], postdate[1] - 1, postdate[2]);
                const date = sdate.toString().split(" ");
                var strdate = date[0] + ", " + date[1] + " " + date[2] + ", " + date[3];
                //  const spdate = sdate.split(" ");
                // console.log(strdate);
                content += `<div class="card blog hover" id="card-` + data.blogs[i].blog_id + `" data-id="` + data.blogs[i].blog_id + `">
                <div class="dropdown" align= center>
                  <i class="mdi mdi-dots-horizontal" type="button" id="dropdownMenuSizeButton3" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></i>
                                              <div class="dropdown-menu" aria-labelledby="dropdownMenuSizeButton3">`;
                if (loginuserid == 0) {
                  content += `<a class="dropdown-item updateblog" href="../login/index.html"><i class="mdi mdi-login text-info"></i><span class="ms-2">Login</span></a>`
                } else {
                  if (data.userdata[0].usid == data.blogs[i].usid) {
                    content += `<a class="dropdown-item updateblog" href="../create/create.html?key=update&s=` + data.blogs[i].blog_id + `"><i class="mdi mdi-pencil text-info"></i><span class="ms-2">Update</span></a>
                           <a class="dropdown-item deleteblog" data-id="`+ data.blogs[i].blog_id + `"><i class="mdi mdi-delete text-info"></i><span class="ms-2">Delete</span></a>`;
                  }
                  // mdi mdi-pencil
                  content += `<a class="dropdown-item savereadlater"  data-id="` + data.blogs[i].blog_id + `"><i class="mdi mdi-clock text-info"></i><span class="ms-2">Save to Read later</span></a>
                           <a class="dropdown-item savereadlist"  data-id="`+ data.blogs[i].blog_id + `" data-bs-toggle="modal" data-bs-target="#modal" data-whatever="Add blog in read-list"><i class="mdi mdi-playlist-plus fw-bold text-info"></i><span class="ms-2">Save to Readlist</span></a>`
                }
                content += `</div>
                                                </div>
                                                <div class="card-top blogpreview loding" data-id="`+ data.blogs[i].blog_id + `">
                                              <img src="../../images/uploadimage/`+ data.blogs[i].blog_cover_photo + `" alt="` + data.blogs[i].blog_title + `">
                                            </div>
                                            <div class="card-bottom flex-row">
                                              <span class="cspaan date">`+ strdate + `</span>
                                              <p class="cp hover-cursor show-profile" data-id=`+ data.blogs[i].usid + `><img class="profile-pic" src="../../images/faces/face1.jpg">` + data.blogs[i].username + `</p>
                                            </div>
                                            <div class="card-info">
                                              <h2 class="btitle">`+ data.blogs[i].blog_title + `</h2>
                                            </div>
                                            <div class="card-bottom flex-row">
                                              <a class="btn btn-outline-primary btn-sm hover" href="./blog.html?s=`+ data.blogs[i].blog_id + `">Read
                                              </a>
                                              <p class="nav">
                                              <i class="lcv mdi mdi-heart"></i>&nbsp;`+ data.blogs[i].likes + `
                                              <i class="lcv mdi mdi-comment"></i>&nbsp;`+ data.blogs[i].comments + `
                                              <i class="lcv mdi mdi-eye "></i>&nbsp;`+ data.blogs[i].totalviews + `
                                              </p>  
                                              
                                              </div> 
                                              </div>`;
              }
            }
            content += `
                          </div>
                        </div>
                        <div class="tab-pane fade" id="category" role="tabpanel" aria-labelledby="read-list">
                          <h4 class="m-0 text-muted">Not select Category</h4>
                          <div class="cards grid-row" id="category-card">`
            for (var i = 0; i < data.blogs.length; i++) {
              if (data.blogs[i].blog_status == "posted" && data.blogs[i].user_type == "blogger") {
                const postdate = data.blogs[i].blog_post_time.split(" ")[0].split("-");
                const sdate = new Date(postdate[0], postdate[1] - 1, postdate[2]);
                const date = sdate.toString().split(" ");
                var strdate = date[0] + ", " + date[1] + " " + date[2] + ", " + date[3];
                //  const spdate = sdate.split(" ");
                // console.log(strdate);
                content += `<div class="card blog hover" id="card-` + data.blogs[i].blog_id + `" data-id="` + data.blogs[i].blog_id + `">
                <div class="dropdown" align= center>
                  <i class="mdi mdi-dots-horizontal" type="button" id="dropdownMenuSizeButton3" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></i>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuSizeButton3">`;
                if (loginuserid == 0) {
                  content += `<a class="dropdown-item updateblog" href="../login/index.html"><i class="mdi mdi-login text-info"></i><span class="ms-2">Login</span></a>`
                } else {
                  if (data.userdata[0].usid == data.blogs[i].usid) {
                    content += `<a class="dropdown-item updateblog" href="../create/create.html?key=update&s=` + data.blogs[i].blog_id + `"><i class="mdi mdi-pencil text-info"></i><span class="ms-2">Update</span></a>
                           <a class="dropdown-item deleteblog" data-id="`+ data.blogs[i].blog_id + `"><i class="mdi mdi-delete text-info"></i><span class="ms-2">Delete</span></a>`;
                  }
                  // mdi mdi-pencil
                  content += `<a class="dropdown-item savereadlater"  data-id="` + data.blogs[i].blog_id + `"><i class="mdi mdi-clock text-info"></i><span class="ms-2">Save to Read later</span></a>
                           <a class="dropdown-item savereadlist"  data-id="`+ data.blogs[i].blog_id + `" data-bs-toggle="modal" data-bs-target="#modal" data-whatever="Add blog in read-list"><i class="mdi mdi-playlist-plus fw-bold text-info"></i><span class="ms-2">Save to Readlist</span></a>`
                }
                content += `</div>
                                                </div>
                                                <div class="card-top blogpreview loding" data-id="`+ data.blogs[i].blog_id + `">
                                              <img src="../../images/uploadimage/`+ data.blogs[i].blog_cover_photo + `" alt="` + data.blogs[i].blog_title + `">
                                            </div>
                                            <div class="card-bottom flex-row">
                                              <span class="cspaan date">`+ strdate + `</span>
                                              <p class="cp hover-cursor show-profile" data-id=`+ data.blogs[i].usid + `><img class="profile-pic" src="../../images/faces/face1.jpg">` + data.blogs[i].username + `</p>
                                            </div>
                                            <div class="card-info">
                                              <h2 class="btitle">`+ data.blogs[i].blog_title + `</h2>
                                            </div>
                                            <div class="card-bottom flex-row">
                                              <a class="btn btn-outline-primary btn-sm hover" href="./blog.html?s=`+ data.blogs[i].blog_id + `">Read
                                              </a>
                                              <p class="nav">
                                              <i class="lcv mdi mdi-heart"></i>&nbsp;`+ data.blogs[i].likes + `
                                              <i class="lcv mdi mdi-comment"></i>&nbsp;`+ data.blogs[i].comments + `
                                              <i class="lcv mdi mdi-eye "></i>&nbsp;`+ data.blogs[i].totalviews + `
                                              </p>  
                                              
                                              </div> 
                                              </div>`;
              }
            }
            content += `
                          </div>
                        </div>
                        <div class="tab-pane fade" id="language" role="tabpanel" aria-labelledby="language-tab">
                          <h4 class="m-0 text-muted">Not select language</h4>
                          <div class="cards grid-row" id="language-card">`
            for (var i = 0; i < data.blogs.length; i++) {
              if (data.blogs[i].blog_status == "posted" && data.blogs[i].user_type == "blogger") {
                const postdate = data.blogs[i].blog_post_time.split(" ")[0].split("-");
                const sdate = new Date(postdate[0], postdate[1] - 1, postdate[2]);
                const date = sdate.toString().split(" ");
                var strdate = date[0] + ", " + date[1] + " " + date[2] + ", " + date[3];
                //  const spdate = sdate.split(" ");
                // console.log(strdate);
                content += `<div class="card blog hover" id="card-` + data.blogs[i].blog_id + `" data-id="` + data.blogs[i].blog_id + `">
                <div class="dropdown" align= center>
                  <i class="mdi mdi-dots-horizontal" type="button" id="dropdownMenuSizeButton3" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></i>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuSizeButton3">`;
                if (loginuserid == 0) {
                  content += `<a class="dropdown-item updateblog" href="../login/index.html"><i class="mdi mdi-login text-info"></i><span class="ms-2">Login</span></a>`
                } else {
                  if (data.userdata[0].usid == data.blogs[i].usid) {
                    content += `<a class="dropdown-item updateblog" href="../create/create.html?key=update&s=` + data.blogs[i].blog_id + `"><i class="mdi mdi-pencil text-info"></i><span class="ms-2">Update</span></a>
                           <a class="dropdown-item deleteblog" data-id="`+ data.blogs[i].blog_id + `"><i class="mdi mdi-delete text-info"></i><span class="ms-2">Delete</span></a>`;
                  }
                  // mdi mdi-pencil
                  content += `<a class="dropdown-item savereadlater"  data-id="` + data.blogs[i].blog_id + `"><i class="mdi mdi-clock text-info"></i><span class="ms-2">Save to Read later</span></a>
                           <a class="dropdown-item savereadlist"  data-id="`+ data.blogs[i].blog_id + `" data-bs-toggle="modal" data-bs-target="#modal" data-whatever="Add blog in read-list"><i class="mdi mdi-playlist-plus fw-bold text-info"></i><span class="ms-2">Save to Readlist</span></a>`
                }
                content += `</div>
                                                </div>
                                                <div class="card-top blogpreview loding" data-id="`+ data.blogs[i].blog_id + `">
                                              <img src="../../images/uploadimage/`+ data.blogs[i].blog_cover_photo + `" alt="` + data.blogs[i].blog_title + `">
                                            </div>
                                            <div class="card-bottom flex-row">
                                              <span class="cspaan date">`+ strdate + `</span>
                                              <p class="cp hover-cursor show-profile" data-id=`+ data.blogs[i].usid + `><img class="profile-pic" src="../../images/faces/face1.jpg">` + data.blogs[i].username + `</p>
                                            </div>
                                            <div class="card-info">
                                              <h2 class="btitle">`+ data.blogs[i].blog_title + `</h2>
                                            </div>
                                            <div class="card-bottom flex-row">
                                              <a class="btn btn-outline-primary btn-sm hover" href="./blog.html?s=`+ data.blogs[i].blog_id + `">Read
                                              </a>
                                              <p class="nav">
                                              <i class="lcv mdi mdi-heart"></i>&nbsp;`+ data.blogs[i].likes + `
                                              <i class="lcv mdi mdi-comment"></i>&nbsp;`+ data.blogs[i].comments + `
                                              <i class="lcv mdi mdi-eye "></i>&nbsp;`+ data.blogs[i].totalviews + `
                                              </p>  
                                              
                                              </div> 
                                              </div>`;
              }
            }
            content += `
                          </div>
                        </div>
                      </div>`;
            $("#alltab").html(content);
            $("#loader").hide()
            $(".body-content").show();
          }
        },
        error: (error) => servererror(error)
      })
      function alldata() {
        $.ajax({
          url: "../../api/trending.php",
          type: "POST",
          data: JSON.stringify({ key: 'trending' }),
          dataType: "JSON",
          success: (data) => {
            console.log(data);
            if (data.status) {
              content = `
              <h4 class="m-0 text-muted">All blogs</h4>
                          <div class="cards grid-row" id="content-cardc">`
              for (var i = 0; i < data.blogs.length; i++) {
                if (data.blogs[i].blog_status == "posted" && data.blogs[i].user_type == "blogger") {
                  const postdate = data.blogs[i].blog_post_time.split(" ")[0].split("-");
                  const sdate = new Date(postdate[0], postdate[1] - 1, postdate[2]);
                  const date = sdate.toString().split(" ");
                  var strdate = date[0] + ", " + date[1] + " " + date[2] + ", " + date[3];
                  //  const spdate = sdate.split(" ");
                  // console.log(strdate);
                  content += `<div class="card blog hover" id="card-` + data.blogs[i].blog_id + `" data-id="` + data.blogs[i].blog_id + `">
                <div class="dropdown" align= center>
                  <i class="mdi mdi-dots-horizontal" type="button" id="dropdownMenuSizeButton3" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></i>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuSizeButton3">`;
                  if (loginuserid == 0) {
                    content += `<a class="dropdown-item updateblog" href="../login/index.html"><i class="mdi mdi-login text-info"></i><span class="ms-2">Login</span></a>`
                  } else {
                    if (data.userdata[0].usid == data.blogs[i].usid) {
                      content += `<a class="dropdown-item updateblog" href="../create/create.html?key=update&s=` + data.blogs[i].blog_id + `"><i class="mdi mdi-pencil text-info"></i><span class="ms-2">Update</span></a>
                           <a class="dropdown-item deleteblog" data-id="`+ data.blogs[i].blog_id + `"><i class="mdi mdi-delete text-info"></i><span class="ms-2">Delete</span></a>`;
                    }
                    // mdi mdi-pencil
                    content += `<a class="dropdown-item savereadlater"  data-id="` + data.blogs[i].blog_id + `"><i class="mdi mdi-clock text-info"></i><span class="ms-2">Save to Read later</span></a>
                           <a class="dropdown-item savereadlist"  data-id="`+ data.blogs[i].blog_id + `" data-bs-toggle="modal" data-bs-target="#modal" data-whatever="Add blog in read-list"><i class="mdi mdi-playlist-plus fw-bold text-info"></i><span class="ms-2">Save to Readlist</span></a>`
                  }
                  content += `</div>
                                                </div>
                                                <div class="card-top blogpreview loding" data-id="`+ data.blogs[i].blog_id + `">
                                              <img src="../../images/uploadimage/`+ data.blogs[i].blog_cover_photo + `" alt="` + data.blogs[i].blog_title + `">
                                            </div>
                                            <div class="card-bottom flex-row">
                                              <span class="cspaan date">`+ strdate + `</span>
                                              <p class="cp hover-cursor show-profile" data-id=`+ data.blogs[i].usid + `><img class="profile-pic" src="../../images/faces/face1.jpg">` + data.blogs[i].username + `</p>
                                            </div>
                                            <div class="card-info">
                                              <h2 class="btitle">`+ data.blogs[i].blog_title + `</h2>
                                            </div>
                                            <div class="card-bottom flex-row">
                                              <a class="btn btn-outline-primary btn-sm hover" href="./blog.html?s=`+ data.blogs[i].blog_id + `">Read
                                              </a>
                                              <p class="nav">
                                              <i class="lcv mdi mdi-heart"></i>&nbsp;`+ data.blogs[i].likes + `
                                              <i class="lcv mdi mdi-comment"></i>&nbsp;`+ data.blogs[i].comments + `
                                              <i class="lcv mdi mdi-eye "></i>&nbsp;`+ data.blogs[i].totalviews + `
                                              </p>  
                                              
                                              </div> 
                                              </div>`;
                }
              }
              content += `
                          </div>`;
              $("#blogs").html(content);
            }
          },
          error: (error) => servererror(error)
        })
      }
      selectedlcategory = selectedlanguage = null;
      function reloaddata() {
        if (categorytab) {
          console.log("category");
          if (selectedlcategory == null) {
            console.log("all");
            alldata();
          } else {
            console.log(selectedlcategory);
            $.ajax({
              url: "../../api/trending.php",
              type: "POST",
              data: JSON.stringify({ key: 'filter_category', id: selectedlcategory }),
              dataType: "JSON",
              success: (data) => {
                console.log(data);
                if (data.status) {
                  content = `
            <h4 class="m-0 text-muted">Selected language "`+ $("#category-combobox").text() + `"</h4>
                          <div class="cards grid-row" id="language-card">`
                  for (var i = 0; i < data.blogs.length; i++) {
                    if (data.blogs[i].blog_status == "posted" && data.blogs[i].user_type == "blogger") {
                      const postdate = data.blogs[i].blog_post_time.split(" ")[0].split("-");
                      const sdate = new Date(postdate[0], postdate[1] - 1, postdate[2]);
                      const date = sdate.toString().split(" ");
                      var strdate = date[0] + ", " + date[1] + " " + date[2] + ", " + date[3];
                      //  const spdate = sdate.split(" ");
                      // console.log(strdate);
                      content += `<div class="card blog hover" id="card-` + data.blogs[i].blog_id + `" data-id="` + data.blogs[i].blog_id + `">
                <div class="dropdown" align= center>
                  <i class="mdi mdi-dots-horizontal" type="button" id="dropdownMenuSizeButton3" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></i>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuSizeButton3">`;
                      if (loginuserid == 0) {
                        content += `<a class="dropdown-item updateblog" href="../login/index.html"><i class="mdi mdi-login text-info"></i><span class="ms-2">Login</span></a>`
                      } else {
                        if (data.userdata[0].usid == data.blogs[i].usid) {
                          content += `<a class="dropdown-item updateblog" href="../create/create.html?key=update&s=` + data.blogs[i].blog_id + `"><i class="mdi mdi-pencil text-info"></i><span class="ms-2">Update</span></a>
                           <a class="dropdown-item deleteblog" data-id="`+ data.blogs[i].blog_id + `"><i class="mdi mdi-delete text-info"></i><span class="ms-2">Delete</span></a>`;
                        }
                        // mdi mdi-pencil
                        content += `<a class="dropdown-item savereadlater"  data-id="` + data.blogs[i].blog_id + `"><i class="mdi mdi-clock text-info"></i><span class="ms-2">Save to Read later</span></a>
                           <a class="dropdown-item savereadlist"  data-id="`+ data.blogs[i].blog_id + `" data-bs-toggle="modal" data-bs-target="#modal" data-whatever="Add blog in read-list"><i class="mdi mdi-playlist-plus fw-bold text-info"></i><span class="ms-2">Save to Readlist</span></a>`
                      }
                      content += `</div>
                                                </div>
                                                <div class="card-top blogpreview loding" data-id="`+ data.blogs[i].blog_id + `">
                                              <img src="../../images/uploadimage/`+ data.blogs[i].blog_cover_photo + `" alt="` + data.blogs[i].blog_title + `">
                                            </div>
                                            <div class="card-bottom flex-row">
                                              <span class="cspaan date">`+ strdate + `</span>
                                              <p class="cp hover-cursor show-profile" data-id=`+ data.blogs[i].usid + `><img class="profile-pic" src="../../images/faces/face1.jpg">` + data.blogs[i].username + `</p>
                                            </div>
                                            <div class="card-info">
                                              <h2 class="btitle">`+ data.blogs[i].blog_title + `</h2>
                                            </div>
                                            <div class="card-bottom flex-row">
                                              <a class="btn btn-outline-primary btn-sm hover" href="./blog.html?s=`+ data.blogs[i].blog_id + `">Read
                                              </a>
                                              <p class="nav">
                                              <i class="lcv mdi mdi-heart"></i>&nbsp;`+ data.blogs[i].likes + `
                                              <i class="lcv mdi mdi-comment"></i>&nbsp;`+ data.blogs[i].comments + `
                                              <i class="lcv mdi mdi-eye "></i>&nbsp;`+ data.blogs[i].totalviews + `
                                              </p>  
                                              
                                              </div> 
                                              </div>`;
                    }
                  }
                  content += `
                          </div>`;
                  $("#category").html(content);
                }
              }, error: (error) => servererror(error)

            })
          }
        } else if (languagetab) {
          console.log("language");

          if (selectedlanguage == null) {
            console.log("all");
            alldata();
          }
          else {
            console.log(selectedlanguage);
            $.ajax({
              url: "../../api/trending.php",
              type: "POST",
              data: JSON.stringify({ key: 'filter_language', id: selectedlanguage }),
              dataType: "JSON",
              success: (data) => {
                console.log(data);
                if (data.status) {
                  content = `
                  <h4 class="m-0 text-muted">Selected language "`+ $("#language-combobox").text() + `"</h4>
                                <div class="cards grid-row" id="language-card">`
                  for (var i = 0; i < data.blogs.length; i++) {
                    if (data.blogs[i].blog_status == "posted" && data.blogs[i].user_type == "blogger") {
                      const postdate = data.blogs[i].blog_post_time.split(" ")[0].split("-");
                      const sdate = new Date(postdate[0], postdate[1] - 1, postdate[2]);
                      const date = sdate.toString().split(" ");
                      var strdate = date[0] + ", " + date[1] + " " + date[2] + ", " + date[3];
                      //  const spdate = sdate.split(" ");
                      // console.log(strdate);
                      content += `<div class="card blog hover" id="card-` + data.blogs[i].blog_id + `" data-id="` + data.blogs[i].blog_id + `">
                      <div class="dropdown" align= center>
                        <i class="mdi mdi-dots-horizontal" type="button" id="dropdownMenuSizeButton3" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></i>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuSizeButton3">`;
                      if (loginuserid == 0) {
                        content += `<a class="dropdown-item updateblog" href="../login/index.html"><i class="mdi mdi-login text-info"></i><span class="ms-2">Login</span></a>`
                      } else {
                        if (data.userdata[0].usid == data.blogs[i].usid) {
                          content += `<a class="dropdown-item updateblog" href="../create/create.html?key=update&s=` + data.blogs[i].blog_id + `"><i class="mdi mdi-pencil text-info"></i><span class="ms-2">Update</span></a>
                           <a class="dropdown-item deleteblog" data-id="`+ data.blogs[i].blog_id + `"><i class="mdi mdi-delete text-info"></i><span class="ms-2">Delete</span></a>`;
                        }
                        // mdi mdi-pencil
                        content += `<a class="dropdown-item savereadlater"  data-id="` + data.blogs[i].blog_id + `"><i class="mdi mdi-clock text-info"></i><span class="ms-2">Save to Read later</span></a>
                           <a class="dropdown-item savereadlist"  data-id="`+ data.blogs[i].blog_id + `" data-bs-toggle="modal" data-bs-target="#modal" data-whatever="Add blog in read-list"><i class="mdi mdi-playlist-plus fw-bold text-info"></i><span class="ms-2">Save to Readlist</span></a>`
                      }
                      content += `</div>
                                                      </div>
                                                      <div class="card-top blogpreview loding" data-id="`+ data.blogs[i].blog_id + `">
                                                    <img src="../../images/uploadimage/`+ data.blogs[i].blog_cover_photo + `" alt="` + data.blogs[i].blog_title + `">
                                                  </div>
                                                  <div class="card-bottom flex-row">
                                                    <span class="cspaan date">`+ strdate + `</span>
                                                    <p class="cp hover-cursor show-profile" data-id=`+ data.blogs[i].usid + `><img class="profile-pic" src="../../images/faces/face1.jpg">` + data.blogs[i].username + `</p>
                                                  </div>
                                                  <div class="card-info">
                                                    <h2 class="btitle">`+ data.blogs[i].blog_title + `</h2>
                                                  </div>
                                                  <div class="card-bottom flex-row">
                                                    <a class="btn btn-outline-primary btn-sm hover" href="./blog.html?s=`+ data.blogs[i].blog_id + `">Read
                                                    </a>
                                                    <p class="nav">
                                                    <i class="lcv mdi mdi-heart"></i>&nbsp;`+ data.blogs[i].likes + `
                                                    <i class="lcv mdi mdi-comment"></i>&nbsp;`+ data.blogs[i].comments + `
                                                    <i class="lcv mdi mdi-eye "></i>&nbsp;`+ data.blogs[i].totalviews + `
                                                    </p>  
                                                    
                                                    </div> 
                                                    </div>`;
                    }
                  }
                  content += `
                          </div>`;
                  $("#language").html(content);
                }
              },
              error: (error) => servererror(error)

            })
          }
        } else {
          console.log("all");
          alldata();
        }
      }
      setInterval(reloaddata, 5000);
    });
    categorytab = languagetab = false;

    $(document).on("click", "#home-tab", function () {
      // alert("home")
      if (categorytab) {
        $(".category-dropdown").toggle(500);
        categorytab = false
      } else if (languagetab) {
        $(".language-dropdown").toggle(500);
        languagetab = false
      }
    })

    $(document).on("click", "#language-tab", function () {
      // alert("l")
      if (categorytab) {
        categorytab = false
        $(".category-dropdown").toggle(500);
      }
      if (!languagetab) {
        languagetab = true;
        $(".language-dropdown").toggle(500);
      }
    })
    $(document).on("click", ".select-category", function () {
      $("#category-combobox").text($(this).text());
      selectedlcategory = $(this).data("value");
      $.ajax({
        url: "../../api/trending.php",
        type: "POST",
        data: JSON.stringify({ key: 'filter_category', id: selectedlcategory }),
        dataType: "JSON",
        success: (data) => {
          console.log(data);
          if (data.status) {
            content = `
            <h4 class="m-0 text-muted">Selected language "`+ $(this).text() + `"</h4>
                          <div class="cards grid-row" id="language-card">`
            for (var i = 0; i < data.blogs.length; i++) {
              if (data.blogs[i].blog_status == "posted" && data.blogs[i].user_type == "blogger") {
                const postdate = data.blogs[i].blog_post_time.split(" ")[0].split("-");
                const sdate = new Date(postdate[0], postdate[1] - 1, postdate[2]);
                const date = sdate.toString().split(" ");
                var strdate = date[0] + ", " + date[1] + " " + date[2] + ", " + date[3];
                //  const spdate = sdate.split(" ");
                // console.log(strdate);
                content += `<div class="card blog hover" id="card-` + data.blogs[i].blog_id + `" data-id="` + data.blogs[i].blog_id + `">
                <div class="dropdown" align= center>
                  <i class="mdi mdi-dots-horizontal" type="button" id="dropdownMenuSizeButton3" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></i>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuSizeButton3">`;
                if (loginuserid == 0) {
                  content += `<a class="dropdown-item updateblog" href="../login/index.html"><i class="mdi mdi-login text-info"></i><span class="ms-2">Login</span></a>`
                } else {
                  if (data.userdata[0].usid == data.blogs[i].usid) {
                    content += `<a class="dropdown-item updateblog" href="../create/create.html?key=update&s=` + data.blogs[i].blog_id + `"><i class="mdi mdi-pencil text-info"></i><span class="ms-2">Update</span></a>
                           <a class="dropdown-item deleteblog" data-id="`+ data.blogs[i].blog_id + `"><i class="mdi mdi-delete text-info"></i><span class="ms-2">Delete</span></a>`;
                  }
                  // mdi mdi-pencil
                  content += `<a class="dropdown-item savereadlater"  data-id="` + data.blogs[i].blog_id + `"><i class="mdi mdi-clock text-info"></i><span class="ms-2">Save to Read later</span></a>
                           <a class="dropdown-item savereadlist"  data-id="`+ data.blogs[i].blog_id + `" data-bs-toggle="modal" data-bs-target="#modal" data-whatever="Add blog in read-list"><i class="mdi mdi-playlist-plus fw-bold text-info"></i><span class="ms-2">Save to Readlist</span></a>`
                }
                content += `</div>
                                                </div>
                                                <div class="card-top blogpreview loding" data-id="`+ data.blogs[i].blog_id + `">
                                              <img src="../../images/uploadimage/`+ data.blogs[i].blog_cover_photo + `" alt="` + data.blogs[i].blog_title + `">
                                            </div>
                                            <div class="card-bottom flex-row">
                                              <span class="cspaan date">`+ strdate + `</span>
                                              <p class="cp hover-cursor show-profile" data-id=`+ data.blogs[i].usid + `><img class="profile-pic" src="../../images/faces/face1.jpg">` + data.blogs[i].username + `</p>
                                            </div>
                                            <div class="card-info">
                                              <h2 class="btitle">`+ data.blogs[i].blog_title + `</h2>
                                            </div>
                                            <div class="card-bottom flex-row">
                                              <a class="btn btn-outline-primary btn-sm hover" href="./blog.html?s=`+ data.blogs[i].blog_id + `">Read
                                              </a>
                                              <p class="nav">
                                              <i class="lcv mdi mdi-heart"></i>&nbsp;`+ data.blogs[i].likes + `
                                              <i class="lcv mdi mdi-comment"></i>&nbsp;`+ data.blogs[i].comments + `
                                              <i class="lcv mdi mdi-eye "></i>&nbsp;`+ data.blogs[i].totalviews + `
                                              </p>  
                                              
                                              </div> 
                                              </div>`;
              }
            }
            content += `
                          </div>`;
            $("#category").html(content);
          }
        },
        error: (error) => servererror(error)

      })
    })
    $(document).on("click", ".select-language", function () {
      $("#language-combobox").text($(this).text());
      selectedlanguage = $(this).data("value");
      // alert(selectedlanguage);
      $.ajax({
        url: "../../api/trending.php",
        type: "POST",
        data: JSON.stringify({ key: 'filter_language', id: selectedlanguage }),
        dataType: "JSON",
        success: (data) => {
          console.log(data);
          if (data.status) {
            content = `
            <h4 class="m-0 text-muted">Selected language "`+ $(this).text() + `"</h4>
                          <div class="cards grid-row" id="language-card">`
            for (var i = 0; i < data.blogs.length; i++) {
              if (data.blogs[i].blog_status == "posted" && data.blogs[i].user_type == "blogger") {
                const postdate = data.blogs[i].blog_post_time.split(" ")[0].split("-");
                const sdate = new Date(postdate[0], postdate[1] - 1, postdate[2]);
                const date = sdate.toString().split(" ");
                var strdate = date[0] + ", " + date[1] + " " + date[2] + ", " + date[3];
                //  const spdate = sdate.split(" ");
                // console.log(strdate);
                content += `<div class="card blog hover" id="card-` + data.blogs[i].blog_id + `" data-id="` + data.blogs[i].blog_id + `">
                <div class="dropdown" align= center>
                  <i class="mdi mdi-dots-horizontal" type="button" id="dropdownMenuSizeButton3" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></i>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuSizeButton3">`;
                if (loginuserid == 0) {
                  content += `<a class="dropdown-item updateblog" href="../login/index.html"><i class="mdi mdi-login text-info"></i><span class="ms-2">Login</span></a>`
                } else {
                  if (data.userdata[0].usid == data.blogs[i].usid) {
                    content += `<a class="dropdown-item updateblog" href="../create/create.html?key=update&s=` + data.blogs[i].blog_id + `"><i class="mdi mdi-pencil text-info"></i><span class="ms-2">Update</span></a>
                           <a class="dropdown-item deleteblog" data-id="`+ data.blogs[i].blog_id + `"><i class="mdi mdi-delete text-info"></i><span class="ms-2">Delete</span></a>`;
                  }
                  // mdi mdi-pencil
                  content += `<a class="dropdown-item savereadlater"  data-id="` + data.blogs[i].blog_id + `"><i class="mdi mdi-clock text-info"></i><span class="ms-2">Save to Read later</span></a>
                           <a class="dropdown-item savereadlist"  data-id="`+ data.blogs[i].blog_id + `" data-bs-toggle="modal" data-bs-target="#modal" data-whatever="Add blog in read-list"><i class="mdi mdi-playlist-plus fw-bold text-info"></i><span class="ms-2">Save to Readlist</span></a>`
                }
                content += `</div>
                                                </div>
                                                <div class="card-top blogpreview loding" data-id="`+ data.blogs[i].blog_id + `">
                                              <img src="../../images/uploadimage/`+ data.blogs[i].blog_cover_photo + `" alt="` + data.blogs[i].blog_title + `">
                                            </div>
                                            <div class="card-bottom flex-row">
                                              <span class="cspaan date">`+ strdate + `</span>
                                              <p class="cp hover-cursor show-profile" data-id=`+ data.blogs[i].usid + `><img class="profile-pic" src="../../images/faces/face1.jpg">` + data.blogs[i].username + `</p>
                                            </div>
                                            <div class="card-info">
                                              <h2 class="btitle">`+ data.blogs[i].blog_title + `</h2>
                                            </div>
                                            <div class="card-bottom flex-row">
                                              <a class="btn btn-outline-primary btn-sm hover" href="./blog.html?s=`+ data.blogs[i].blog_id + `">Read
                                              </a>
                                              <p class="nav">
                                              <i class="lcv mdi mdi-heart"></i>&nbsp;`+ data.blogs[i].likes + `
                                              <i class="lcv mdi mdi-comment"></i>&nbsp;`+ data.blogs[i].comments + `
                                              <i class="lcv mdi mdi-eye "></i>&nbsp;`+ data.blogs[i].totalviews + `
                                              </p>  
                                              
                                              </div> 
                                              </div>`;
              }
            }
            content += `
                          </div>`;
            $("#language").html(content);
          }
        }, error: (error) => servererror(error)
      })
    })
    $(document).on("click", "#category-tab", function () {
      // alert("c")
      if (languagetab) {
        languagetab = false
        $(".language-dropdown").toggle(500);
      }
      if (!categorytab) {
        categorytab = true
        $(".category-dropdown").toggle(500);
      }
    })
  </script>
  <script src="../../vendors/js/vendor.bundle.base.js"></script>
  <!-- plugins:js -->
  <script src="../../js/allfilefunction.js"></script>

  <!-- endinject -->
  <!-- Plugin js for this page -->
  <script src="../../vendors/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
  <script src="../../vendors/sweetalert/sweetalert.min.js"></script>
  <script src="../../vendors/jquery-toast-plugin/jquery.toast.min.js"></script>
  <!-- End plugin js for this page -->
  <!-- inject:js -->
  <script src="../../js/off-canvas.js"></script>

  <script src="../../js/hoverable-collapse.js"></script>
  <script src="../../js/template.js"></script>
  <script src="../../js/settings.js"></script>
  <script src="../../js/todolist.js"></script>
  <!-- endinject -->
  <script src="../../js/toastDemo.js"></script>
  <script src="../../js/popover.js"></script>
  <script src="../../js/tooltips.js"></script>
  <!-- Custom js for this page-->
  <script src="../../js/jquery.cookie.js" type="text/javascript"></script>
  <script src="../../js/dashboard.js"></script>
  <script src="../../js/Chart.roundedBarCharts.js"></script>
  <script src="../../js/alertp.js"></script>
  <script src="../../js/modal-demo.js"></script>

  <!-- End custom js for this page-->
  <!-- <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery.lazyload/1.9.7/jquery.lazyload.js"></script>
      <script type="text/javascript" charset="utf-8">
  $(function() {
    $("div.lazy").lazyload({
      effect : "fadeIn"
     });

  }); -->
  </script>
</body>
<audio id="audioBox">
  <source src="../../audio/notify.mp3" type="audio/mpeg" />
  <source src="../../audio/notify.wav" type="audio/wav" />
  <source src="../../audio/notify.ogg" type="audio/ogg" />
</audio>


</html>